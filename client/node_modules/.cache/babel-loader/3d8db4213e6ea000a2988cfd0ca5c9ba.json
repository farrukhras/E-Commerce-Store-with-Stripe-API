{"ast":null,"code":"import _defineProperty from\"/Users/Farrukh/Documents/e-commerce/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"/Users/Farrukh/Documents/e-commerce/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/Farrukh/Documents/e-commerce/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import{createAsyncThunk,createSlice}from'@reduxjs/toolkit';var initialState={categories:[],// products: [],\nloading:false,isCategoriesFetched:false,totalCount:0,cartItems:[],totalPrice:0,isPaymentSuccessful:false};export var fetchCategories=createAsyncThunk('store/fetchCategories',/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('https://fakestoreapi.com/products/categories').then(function(res){return res.json();});case 2:response=_context.sent;return _context.abrupt(\"return\",response);case 4:case\"end\":return _context.stop();}}},_callee);})));// export const fetchProducts = createAsyncThunk(\n//   'store/fetchProducts',\n//   async (category) => {\n//     const response = await fetch(`https://fakestoreapi.com/products/category/jewelery?limit=4`)\n//     .then((res) => res.json())\n//     let data = {};\n//     data[\"category\"] = category;\n//     data[\"data\"] = response;\n//     return data;\n//   }\n// );\nvar storeSlice=createSlice({name:\"store\",initialState:initialState,reducers:{// reducers go here\naddToCart:function addToCart(state,action){var existingCartItemIndex=state.cartItems.findIndex(function(cartItem){return cartItem.id===action.payload.id;});if(existingCartItemIndex!==-1){state.cartItems[existingCartItemIndex].quantity=state.cartItems[existingCartItemIndex].quantity+1;}else{var newCartItem={\"id\":action.payload.id,\"data\":action.payload,\"quantity\":1};state.cartItems.push(newCartItem);}state.totalCount=state.totalCount+1;state.totalPrice=state.totalPrice+action.payload.price;},addItem:function addItem(state,action){var itemIndex=state.cartItems.findIndex(function(cartItem){return cartItem.id===action.payload.id;});state.cartItems[itemIndex].quantity=state.cartItems[itemIndex].quantity+1;state.totalCount=state.totalCount+1;state.totalPrice=state.totalPrice+state.cartItems[itemIndex].data.price;},removeItem:function removeItem(state,action){var itemIndex=state.cartItems.findIndex(function(cartItem){return cartItem.id===action.payload.id;});state.totalPrice=state.totalPrice-state.cartItems[itemIndex].data.price;if(state.cartItems[itemIndex].quantity===1){state.cartItems=state.cartItems.filter(function(cartItem){return cartItem.id!==action.payload.id;});}else{state.cartItems[itemIndex].quantity=state.cartItems[itemIndex].quantity-1;}state.totalCount=state.totalCount-1;},clearItem:function clearItem(state,action){var itemIndex=state.cartItems.findIndex(function(cartItem){return cartItem.id===action.payload.id;});var countToRemove=state.cartItems[itemIndex].quantity;state.totalPrice=state.totalPrice-state.cartItems[itemIndex].quantity*state.cartItems[itemIndex].data.price;state.cartItems=state.cartItems.filter(function(cartItem){return cartItem.id!==action.payload.id;});state.totalCount=state.totalCount-countToRemove;},clearCart:function clearCart(state,action){state.cartItems=[];state.totalCount=0;state.totalPrice=0;state.isPaymentSuccessful=true;}},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,fetchCategories.pending,function(state,action){state.loading=true;state.isCategoriesFetched=false;}),_defineProperty(_extraReducers,fetchCategories.fulfilled,function(state,action){state.loading=false;state.isCategoriesFetched=true;state.categories=action.payload;}),_defineProperty(_extraReducers,fetchCategories.rejected,function(state,action){state.loading=false;state.isCategoriesFetched=false;}),_extraReducers)});var _storeSlice$actions=storeSlice.actions,addToCart=_storeSlice$actions.addToCart,addItem=_storeSlice$actions.addItem,removeItem=_storeSlice$actions.removeItem,clearItem=_storeSlice$actions.clearItem,clearCart=_storeSlice$actions.clearCart;export{addToCart,addItem,removeItem,clearItem,clearCart};export default storeSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","initialState","categories","loading","isCategoriesFetched","totalCount","cartItems","totalPrice","isPaymentSuccessful","fetchCategories","fetch","then","res","json","response","storeSlice","name","reducers","addToCart","state","action","existingCartItemIndex","findIndex","cartItem","id","payload","quantity","newCartItem","push","price","addItem","itemIndex","data","removeItem","filter","clearItem","countToRemove","clearCart","extraReducers","pending","fulfilled","rejected","actions","reducer"],"sources":["/Users/Farrukh/Documents/e-commerce/client/src/components/storeSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n\nconst initialState = {\n  categories: [],\n  // products: [],\n  loading: false,\n  isCategoriesFetched: false,\n  totalCount: 0,\n  cartItems: [],\n  totalPrice: 0,\n  isPaymentSuccessful: false,\n};\n\nexport const fetchCategories = createAsyncThunk(\n  'store/fetchCategories',\n  async () => {\n    const response = await fetch('https://fakestoreapi.com/products/categories')\n    .then((res) => res.json())\n    \n    return response;\n  }\n);\n\n// export const fetchProducts = createAsyncThunk(\n//   'store/fetchProducts',\n//   async (category) => {\n//     const response = await fetch(`https://fakestoreapi.com/products/category/jewelery?limit=4`)\n//     .then((res) => res.json())\n//     let data = {};\n//     data[\"category\"] = category;\n//     data[\"data\"] = response;\n//     return data;\n//   }\n// );\n\nconst storeSlice = createSlice({\n  name: \"store\",\n  initialState: initialState,\n  reducers: {\n    // reducers go here\n    addToCart: (state, action) => {\n      const existingCartItemIndex = state.cartItems.findIndex(\n        cartItem => cartItem.id === action.payload.id\n      );\n      \n      if(existingCartItemIndex !== -1) {\n        state.cartItems[existingCartItemIndex].quantity = state.cartItems[existingCartItemIndex].quantity + 1;\n      } else {\n        let newCartItem = {\n          \"id\": action.payload.id,\n          \"data\": action.payload,\n          \"quantity\": 1\n        }\n        state.cartItems.push(newCartItem);\n      }\n      state.totalCount = state.totalCount + 1;\n      state.totalPrice = state.totalPrice + action.payload.price;\n    },\n\n    addItem: (state, action) => {\n      const itemIndex = state.cartItems.findIndex(\n        cartItem => cartItem.id === action.payload.id\n      );\n\n      state.cartItems[itemIndex].quantity = state.cartItems[itemIndex].quantity + 1;\n      state.totalCount = state.totalCount + 1;\n      state.totalPrice = state.totalPrice + state.cartItems[itemIndex].data.price;\n    },\n\n    removeItem: (state, action) => {\n      const itemIndex = state.cartItems.findIndex(\n        cartItem => cartItem.id === action.payload.id\n      );\n      \n      state.totalPrice = state.totalPrice - state.cartItems[itemIndex].data.price;\n      if (state.cartItems[itemIndex].quantity === 1) {\n        state.cartItems = state.cartItems.filter(cartItem => cartItem.id !== action.payload.id);\n      } else {\n        state.cartItems[itemIndex].quantity = state.cartItems[itemIndex].quantity - 1;\n      }\n      state.totalCount = state.totalCount - 1;\n    }, \n\n    clearItem: (state, action) => {\n      const itemIndex = state.cartItems.findIndex(\n        cartItem => cartItem.id === action.payload.id\n      );\n\n      const countToRemove = state.cartItems[itemIndex].quantity;\n      state.totalPrice = state.totalPrice - (state.cartItems[itemIndex].quantity)*(state.cartItems[itemIndex].data.price);\n      state.cartItems = state.cartItems.filter(cartItem => cartItem.id !== action.payload.id);\n      state.totalCount = state.totalCount - countToRemove;\n    },\n\n    clearCart: (state, action) => {\n      state.cartItems = [];\n      state.totalCount = 0;\n      state.totalPrice = 0;\n      state.isPaymentSuccessful = true\n    }\n  },\n  extraReducers: {\n    [fetchCategories.pending]: (state, action) => {\n      state.loading = true;\n      state.isCategoriesFetched = false;\n    },\n    [fetchCategories.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.isCategoriesFetched = true;\n      state.categories = action.payload;\n    },\n    [fetchCategories.rejected]: (state, action) => {\n      state.loading = false;\n      state.isCategoriesFetched = false;\n    },\n\n    // [fetchProducts.pending]: (state, action) => {\n    //   state.loading = true;\n    // },\n    // [fetchProducts.fulfilled]: (state, action) => {\n    //   state.loading = false;\n    //   state.products = [...state.products, action.payload]\n    // },\n    // [fetchProducts.rejected]: (state, action) => {\n    //   state.loading = false;\n    // }\n  }\n})\n\nexport const {\n  addToCart,\n  addItem,\n  removeItem,\n  clearItem,\n  clearCart\n} = storeSlice.actions;\n\nexport default storeSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}