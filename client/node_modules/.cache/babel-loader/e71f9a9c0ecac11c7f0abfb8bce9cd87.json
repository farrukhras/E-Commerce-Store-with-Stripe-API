{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nconst initialState = {\n  categories: [],\n  // products: [],\n  loading: false,\n  isCategoriesFetched: false,\n  totalCount: 0,\n  cartItems: [],\n  totalPrice: 0,\n  isPaymentSuccessful: false\n};\nexport const fetchCategories = createAsyncThunk('store/fetchCategories', async () => {\n  const response = await fetch('https://fakestoreapi.com/products/categories').then(res => res.json());\n  return response;\n}); // export const fetchProducts = createAsyncThunk(\n//   'store/fetchProducts',\n//   async (category) => {\n//     const response = await fetch(`https://fakestoreapi.com/products/category/jewelery?limit=4`)\n//     .then((res) => res.json())\n//     let data = {};\n//     data[\"category\"] = category;\n//     data[\"data\"] = response;\n//     return data;\n//   }\n// );\n\nconst storeSlice = createSlice({\n  name: \"store\",\n  initialState: initialState,\n  reducers: {\n    // reducers go here\n    addToCart: (state, action) => {\n      const existingCartItemIndex = state.cartItems.findIndex(cartItem => cartItem.id === action.payload.id);\n\n      if (existingCartItemIndex !== -1) {\n        state.cartItems[existingCartItemIndex].quantity = state.cartItems[existingCartItemIndex].quantity + 1;\n      } else {\n        let newCartItem = {\n          \"id\": action.payload.id,\n          \"data\": action.payload,\n          \"quantity\": 1\n        };\n        state.cartItems.push(newCartItem);\n      }\n\n      state.totalCount = state.totalCount + 1;\n      state.totalPrice = state.totalPrice + action.payload.price;\n    },\n    addItem: (state, action) => {\n      const itemIndex = state.cartItems.findIndex(cartItem => cartItem.id === action.payload.id);\n      state.cartItems[itemIndex].quantity = state.cartItems[itemIndex].quantity + 1;\n      state.totalCount = state.totalCount + 1;\n      state.totalPrice = state.totalPrice + state.cartItems[itemIndex].data.price;\n    },\n    removeItem: (state, action) => {\n      const itemIndex = state.cartItems.findIndex(cartItem => cartItem.id === action.payload.id);\n      state.totalPrice = state.totalPrice - state.cartItems[itemIndex].data.price;\n\n      if (state.cartItems[itemIndex].quantity === 1) {\n        state.cartItems = state.cartItems.filter(cartItem => cartItem.id !== action.payload.id);\n      } else {\n        state.cartItems[itemIndex].quantity = state.cartItems[itemIndex].quantity - 1;\n      }\n\n      state.totalCount = state.totalCount - 1;\n    },\n    clearItem: (state, action) => {\n      const itemIndex = state.cartItems.findIndex(cartItem => cartItem.id === action.payload.id);\n      const countToRemove = state.cartItems[itemIndex].quantity;\n      state.totalPrice = state.totalPrice - state.cartItems[itemIndex].quantity * state.cartItems[itemIndex].data.price;\n      state.cartItems = state.cartItems.filter(cartItem => cartItem.id !== action.payload.id);\n      state.totalCount = state.totalCount - countToRemove;\n    },\n    clearCart: (state, action) => {\n      state.cartItems = [];\n      state.totalCount = 0;\n      state.totalPrice = 0;\n      state.isPaymentSuccessful = true;\n    }\n  },\n  extraReducers: {\n    [fetchCategories.pending]: (state, action) => {\n      state.loading = true;\n      state.isCategoriesFetched = false;\n    },\n    [fetchCategories.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.isCategoriesFetched = true;\n      state.categories = action.payload;\n    },\n    [fetchCategories.rejected]: (state, action) => {\n      state.loading = false;\n      state.isCategoriesFetched = false;\n    } // [fetchProducts.pending]: (state, action) => {\n    //   state.loading = true;\n    // },\n    // [fetchProducts.fulfilled]: (state, action) => {\n    //   state.loading = false;\n    //   state.products = [...state.products, action.payload]\n    // },\n    // [fetchProducts.rejected]: (state, action) => {\n    //   state.loading = false;\n    // }\n\n  }\n});\nexport const {\n  addToCart,\n  addItem,\n  removeItem,\n  clearItem,\n  clearCart\n} = storeSlice.actions;\nexport default storeSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","initialState","categories","loading","isCategoriesFetched","totalCount","cartItems","totalPrice","isPaymentSuccessful","fetchCategories","response","fetch","then","res","json","storeSlice","name","reducers","addToCart","state","action","existingCartItemIndex","findIndex","cartItem","id","payload","quantity","newCartItem","push","price","addItem","itemIndex","data","removeItem","filter","clearItem","countToRemove","clearCart","extraReducers","pending","fulfilled","rejected","actions","reducer"],"sources":["/Users/Farrukh/Documents/e-commerce/client/src/components/storeSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n\nconst initialState = {\n  categories: [],\n  // products: [],\n  loading: false,\n  isCategoriesFetched: false,\n  totalCount: 0,\n  cartItems: [],\n  totalPrice: 0,\n  isPaymentSuccessful: false,\n};\n\nexport const fetchCategories = createAsyncThunk(\n  'store/fetchCategories',\n  async () => {\n    const response = await fetch('https://fakestoreapi.com/products/categories')\n    .then((res) => res.json())\n    \n    return response;\n  }\n);\n\n// export const fetchProducts = createAsyncThunk(\n//   'store/fetchProducts',\n//   async (category) => {\n//     const response = await fetch(`https://fakestoreapi.com/products/category/jewelery?limit=4`)\n//     .then((res) => res.json())\n//     let data = {};\n//     data[\"category\"] = category;\n//     data[\"data\"] = response;\n//     return data;\n//   }\n// );\n\nconst storeSlice = createSlice({\n  name: \"store\",\n  initialState: initialState,\n  reducers: {\n    // reducers go here\n    addToCart: (state, action) => {\n      const existingCartItemIndex = state.cartItems.findIndex(\n        cartItem => cartItem.id === action.payload.id\n      );\n      \n      if(existingCartItemIndex !== -1) {\n        state.cartItems[existingCartItemIndex].quantity = state.cartItems[existingCartItemIndex].quantity + 1;\n      } else {\n        let newCartItem = {\n          \"id\": action.payload.id,\n          \"data\": action.payload,\n          \"quantity\": 1\n        }\n        state.cartItems.push(newCartItem);\n      }\n      state.totalCount = state.totalCount + 1;\n      state.totalPrice = state.totalPrice + action.payload.price;\n    },\n\n    addItem: (state, action) => {\n      const itemIndex = state.cartItems.findIndex(\n        cartItem => cartItem.id === action.payload.id\n      );\n\n      state.cartItems[itemIndex].quantity = state.cartItems[itemIndex].quantity + 1;\n      state.totalCount = state.totalCount + 1;\n      state.totalPrice = state.totalPrice + state.cartItems[itemIndex].data.price;\n    },\n\n    removeItem: (state, action) => {\n      const itemIndex = state.cartItems.findIndex(\n        cartItem => cartItem.id === action.payload.id\n      );\n      \n      state.totalPrice = state.totalPrice - state.cartItems[itemIndex].data.price;\n      if (state.cartItems[itemIndex].quantity === 1) {\n        state.cartItems = state.cartItems.filter(cartItem => cartItem.id !== action.payload.id);\n      } else {\n        state.cartItems[itemIndex].quantity = state.cartItems[itemIndex].quantity - 1;\n      }\n      state.totalCount = state.totalCount - 1;\n    }, \n\n    clearItem: (state, action) => {\n      const itemIndex = state.cartItems.findIndex(\n        cartItem => cartItem.id === action.payload.id\n      );\n\n      const countToRemove = state.cartItems[itemIndex].quantity;\n      state.totalPrice = state.totalPrice - (state.cartItems[itemIndex].quantity)*(state.cartItems[itemIndex].data.price);\n      state.cartItems = state.cartItems.filter(cartItem => cartItem.id !== action.payload.id);\n      state.totalCount = state.totalCount - countToRemove;\n    },\n\n    clearCart: (state, action) => {\n      state.cartItems = [];\n      state.totalCount = 0;\n      state.totalPrice = 0;\n      state.isPaymentSuccessful = true\n    }\n  },\n  extraReducers: {\n    [fetchCategories.pending]: (state, action) => {\n      state.loading = true;\n      state.isCategoriesFetched = false;\n    },\n    [fetchCategories.fulfilled]: (state, action) => {\n      state.loading = false;\n      state.isCategoriesFetched = true;\n      state.categories = action.payload;\n    },\n    [fetchCategories.rejected]: (state, action) => {\n      state.loading = false;\n      state.isCategoriesFetched = false;\n    },\n\n    // [fetchProducts.pending]: (state, action) => {\n    //   state.loading = true;\n    // },\n    // [fetchProducts.fulfilled]: (state, action) => {\n    //   state.loading = false;\n    //   state.products = [...state.products, action.payload]\n    // },\n    // [fetchProducts.rejected]: (state, action) => {\n    //   state.loading = false;\n    // }\n  }\n})\n\nexport const {\n  addToCart,\n  addItem,\n  removeItem,\n  clearItem,\n  clearCart\n} = storeSlice.actions;\n\nexport default storeSlice.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}